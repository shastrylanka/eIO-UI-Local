!function(a){define("YLT/columns/boolean-list-view-column",["./list-view-column","../views/boolean-list-view-cell","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"];c["default"]=d.extend({cellView:e,routeName:null,getContext:function(a){return Ember.get(a,"id")},navigate:function(){}})}),define("YLT/columns/hyperlink-list-view-column",["./list-view-column","../views/hyperlink-list-view-cell","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"];c["default"]=d.extend({cellView:e,routeName:null,getContext:function(a){return Ember.get(a,"id")},navigate:function(){}})}),define("YLT/columns/list-view-column",["../views/list-view-header","../views/list-view-footer","../views/list-view-cell","../views/list-view-editable-cell","exports"],function(a,b,c,d,e){"use strict";var f=a["default"],g=b["default"],h=c["default"],i=d["default"];e["default"]=Ember.Object.extend({header:null,valueBindingPath:null,cellView:h,editView:i,headerView:f,footerView:g,sortable:!0,getRenderValue:function(a){var b=this.get("renderer"),c=this.get("valueBindingPath"),d=c&&a?a.get(c):null;return b&&"function"==typeof b&&(d=b.call(this,d,a)),null!==d&&""!==d?d:this.emptyValue}})}),define("YLT/controllers/list-view-row",["exports"],function(a){"use strict";a["default"]=Ember.ArrayController.extend({isSelected:!1,isEditing:!1,isExpanded:function(){return this.get("isSelected")&&this.get("parentController.expandedView")}.property("isSelected"),actions:{beginEditing:function(){this.get("parentController.autoEdit")&&"row"===this.get("parentController.autoEditMode")&&!this.get("isEditing")&&this.toggleProperty("isEditing")}}})}),define("YLT/core",["exports"],function(a){"use strict";var b;"undefined"==typeof b&&(b=Ember.Namespace.create({VERSION:"0.0.16"}),"undefined"!=typeof window&&(window.YLT=b),Ember.libraries&&Ember.libraries.registerCoreLibrary("Yahoo Table",b.VERSION)),a["default"]=b}),define("YLT/initializer",["./views/list-view-cell","./views/list-view-editable-cell","./views/list-view-cell-container","./views/boolean-list-view-cell","./views/hyperlink-list-view-cell","./views/infinite-list-view","./views/list-view-header","./views/list-view-row","./controllers/list-view-row"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=a["default"],k=b["default"],l=c["default"],m=d["default"],n=e["default"],o=f["default"],p=g["default"],q=h["default"],r=i["default"];Ember.onLoad("Ember.Application",function(a){a.initializer({name:"light-table",initialize:function(a,b){b.register("view:light-table/listViewCell",j),b.register("view:light-table/listViewEditableCell",k),b.register("view:light-table/listViewCellContainer",l),b.register("view:light-table/booleanListViewCell",m),b.register("view:light-table/hyperLinkListViewCell",n),b.register("view:light-table/infiniteListView",o),b.register("view:light-table/listViewHeader",p),b.register("view:light-table/listViewRow",q),b.register("controller:light-table/listViewRowController",r)}})})}),define("YLT/main",["./core","./controllers/list-view-row","./mixins/infinite-fetch-controller","./mixins/infinite-fetch-view","./views/list-view-cell-container","./views/list-view-cell","./views/list-view-editable-cell","./views/boolean-list-view-cell","./views/hyperlink-list-view-cell","./views/infinite-list-view","./views/list-view-header","./views/list-view-row","./columns/boolean-list-view-column","./columns/hyperlink-list-view-column","./columns/list-view-column","./initializer","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";var r=a["default"],s=b["default"],t=c["default"],u=d["default"],v=e["default"],w=f["default"],x=g["default"],v=e["default"],y=h["default"],z=i["default"],A=j["default"],B=k["default"],C=l["default"],D=m["default"],E=n["default"],F=o["default"];Ember.Handlebars.registerBoundHelper("boolean-to-check",function(a){return new Ember.Handlebars.SafeString(a===!0?"<i class='icon-active'></i>":"")}),r.InfiniteFetchControllerMixin=t,r.InfiniteFetchViewMixin=u,r.ListViewCellContainer=v,r.ListViewCell=w,r.ListViewEditableCell=x,r.ListViewCellContainer=v,r.BooleanListViewCell=y,r.HyperLinkListViewCell=z,r.InfiniteListView=A,r.ListViewHeader=B,r.ListViewRow=C,r.BooleanListViewColumn=D,r.HyperLinkListViewColumn=E,r.ListViewColumn=F,r.ListViewRowController=s,q["default"]=r}),define("YLT/mixins/infinite-fetch-controller",["../controllers/list-view-row","../views/list-view-row","../views/list-view-footer-row","exports"],function(a,b,c,d){"use strict";var e=a["default"],f=b["default"],g=c["default"];d["default"]=Ember.Mixin.create({isLoading:!1,autoEdit:!1,autoEditMode:"cell",rowView:f,rowController:e,columnGroup:null,expandedView:null,showFooter:!1,footerView:g,selectedRow:null,tableContentBinding:"content",mode:function(){return this.loadData?"server":"client"}.property(),setOptions:function(a,b){var c=this.get("options")||Ember.Object.create({});return c.set(a,Ember.Object.create(_.extend({page:1,limit:50,filterText:null,groups:Ember.ArrayProxy.create({content:Ember.A()}),bufferGroup:null,sortColumn:null,isLoading:!1,sortAscending:!1,allDataLoaded:!1,queryParams:{},forView:a},b))),this.get("options")||this.set("options",c),c.get(a)},init:function(){this._super(),this.get("columns")&&this.get("columns").forEach(function(a){a.set("table",this)},this),this.setOptions("tableContent"),this.addObserver("filterText",this,"onFilterTextChanged"),this.set("arrangedColumns",Ember.ArrayProxy.create({content:Ember.A()}))},onArrangedColumns:function(){Ember.run.next(this,function(){this.get("arrangedColumns").setObjects(this.get("columns").filter(function(a){var b=a.get("groups");return!b||b.contains(this.get("columnGroup"))},this))}.bind(this))}.observes("columns.[]","columnGroup").on("init"),contentIsLoading:function(){return this.get("isLoading")||this.get("options.tableContent.isLoading")}.property("isLoading","options.tableContent.isLoading"),resultsAreEmpty:function(){return this.get("options.tableContent.groups.content.length")<=0}.property("options.tableContent.groups.content.length"),getLoadedContent:function(a){a=this.getForView(a)||"tableContent";var b=[],c=this.get("options."+a);if(c){c.get("groups").forEach(function(a){b.pushObjects(a)});var d=c.get("bufferGroup");d&&b.pushObjects(d)}return b},resetContent:function(a,b){b=b||this.get(a);var c=this.get("options."+a),d=c.get("limit"),e=b.get("length"),f=this,g=null;if(!(d>0))throw"Page size must be greater than 0.";c.get("groups").clear();var h=[],i=Math.floor(e/d);b.setEach("isSelected",!1),e%d>0&&i++;for(var j=0;i-1>j;j++)h.push(this._getRowControllersOrRows(b.slice(j*d,(j+1)*d)));i=Math.max(i,1),g=this._getRowControllersOrRows(b.slice((i-1)*d)),c.get("groups").pushObjects(h),g.setEach("isSelected",!1),c.setProperties({bufferGroup:g,page:i,allDataLoaded:!1}),Ember.run.scheduleOnce("afterRender",f,function(){(1>=i||g.length>0&&!f.documentHasVerticalScrollbar())&&f.send("loadData",c)})},contentChanged:function(){this.set("selectedRow",null),this.resetContent("tableContent")}.observes("tableContent"),onFilterTextChanged:function(){this.set("options.tableContent.filterText",this.get("filterText")),this.reloadData("tableContent")},actions:{loadData:function(a){a=this.getForView(a)||"tableContent";var b=null;if(a instanceof Ember.Object?(b=a,a=b.forView):b=this.get("options."+a),!b.get("isLoading")&&!b.get("allDataLoaded")){var c=this,d=b.get("bufferGroup");if(d&&(d.get("length")>0&&b.get("groups").pushObject(d),b.set("bufferGroup",null)),d&&d.length<b.get("limit")||"client"===this.get("mode")||this.loadData)b.set("allDataLoaded",!0);else{b.incrementProperty("page");var e=this.loadData(this.getLoadParams(a));if(e){if(!e.then){var f=e;e=new Ember.RSVP.Promise(function(a){a({content:f})})}b.set("isLoading",!0),e.then(function(a){b.setProperties({isLoading:!1,bufferGroup:c._getRowControllersOrRows(Array.isArray(a)?a:a.content)}),Ember.run.scheduleOnce("afterRender",c,function(){a.content&&a.content.get("length")>0&&!c.documentHasVerticalScrollbar()&&(b.incrementProperty("page"),c.send("loadData",b))})})}}}},sortByColumn:function(a,b){if(a.get("sortable")){b=this.getForView(b)||"tableContent";var c=this.get("options."+b);a===c.get("sortColumn")&&c.toggleProperty("sortAscending"),c.set("sortColumn",a),this.reloadData(b)}}},reloadData:function(a){a=this.getForView(a)||"tableContent";var b=this.get("options."+a);if(b.setProperties({page:1,bufferGroup:null,allDataLoaded:"client"===this.get("mode")}),b.get("groups").clear(),"server"===this.get("mode")&&this.loadData){var c=this.loadData(this.getLoadParams(a),a),d=this;if(c){if(!c.then){var e=c;c=new Ember.RSVP.Promise(function(a){a({tableContent:e})})}b.set("isLoading",!0),c.then(function(c){b.set("isLoading",!1),d.set(a,c)})}else b.set("allDataLoaded",!0)}},getLoadParams:function(a){a=this.getForView(a)||"tableContent";var b=this.get("options."+a),c=b.get("queryParams"),d={};if(b.get("filterText")&&(d.query=b.get("filterText")),c)for(var e in c)null!==c[e]&&void 0!==c[e]&&(d[e]=c[e]);return d.page=b.get("page"),d.limit=b.get("limit")*(1===d.page?2:1),b.get("sortColumn")&&(d.dir=b.get("sortAscending")?"asc":"desc",d.sort=b.get("sortColumn.valueBindingPath")||Ember.String.camelize(b.get("sortColumn.header"))),d},loadData:null,getForView:function(a){return a},rowDoubleClick:function(){return!0},documentHasVerticalScrollbar:function(){return Ember.$("body").height()>Ember.$(window).height()},insertRows:function(a,b){this.addRows(a,b,this.get("options."+b+".groups.firstObject"))},addRows:function(a,b,c){b=this.getForView(b)||"tableContent";var d=this.get("options."+b);d&&a&&(a=Ember.isArray(a)?a:[a],Ember.isEmpty(a)||(c=c||d.get("groups.lastObject"),a=this._getRowControllersOrRows(a),c?c.pushObjects(a):d.get("groups").pushObject(a)))},removeRows:function(a,b){b=this.getForView(b)||"tableContent";var c=this.get("options."+b);if(c&&a&&(a=Ember.isArray(a)?a:[a],!Ember.isEmpty(a))){var d=[],e=c.get("groups"),f=c.get("bufferGroup");e.forEach(function(b){b.removeObjects(a),0===b.get("length")&&d.push(b)}),Ember.isEmpty(d)||e.removeObjects(d),f&&(f.removeObjects(a),0===f.get("length")&&c.set("bufferGroup",null))}},exportData:function(a,b){b=b||"tableContent";var c=(this.get("options."+b),this.get("rowController")),d="data:text/csv;charset=utf-8,";this.get("arrangedColumns").forEach(function(a){d+='"'+(a.get("header")||"").toString().replace('"','/"')+'",'},this),d+="\n",this.getLoadedContent().forEach(function(a){a instanceof c&&(a=a.get("row")),this.get("arrangedColumns").forEach(function(b){d+='"'+(b.getRenderValue(a)||"").toString().replace('"','/"')+'",'}),d+="\n"},this),d+="\n";var e=encodeURI(d),f=document.createElement("a");f.setAttribute("href",e),f.setAttribute("download",a||"Data_Export.csv"),f.click()},_getRowControllersOrRows:function(a){var b=this.get("rowController");return a=b?a.map(function(a){return a instanceof b?a:b.create({target:this,content:this.get("arrangedColumns"),row:a,container:this.get("container"),parentController:this})},this):a,Ember.A(a)}})}),define("YLT/mixins/infinite-fetch-view",["exports"],function(a){"use strict";a["default"]=Ember.Mixin.create({forView:"tableContent",footerOffset:null,footerPosition:null,_viewPort:null,_footerRelativeTo:null,didInsertElement:function(){var a=this.$(),b=null;a.parents().each(function(a,c){var d=Ember.$(c);!b&&["scroll","auto"].contains(d.css("overflow-y"))&&(b=d)}),this.set("_viewPort",b||Ember.$(window)),this.get("_viewPort").on("scroll",Ember.$.proxy(this.didScroll,this)),this.get("controller.showFooter")&&(Ember.$(window).on("resize",Ember.$.proxy(this._onResize,this)),this._onResize())},willDestroyElement:function(){this.get("_viewPort").off("scroll",Ember.$.proxy(this.didScroll,this)),Ember.$(window).off("resize",Ember.$.proxy(this._onResize,this))},didScroll:function(){this.isScrolledToBottom()&&this.get("controller").send("loadData",this.get("forView"))},isScrolledToBottom:function(){var a=this.get("_viewPort"),b=Ember.$(a.children()[0]||document),c=b.height()-a.height(),d=b.scrollTop();return 0===d?!1:d-c===0},_onResize:function(){var a=this.$(),b=a.find("tfoot");if(b){var c=null;a.parents().each(function(b,d){var e=Ember.$(d);!c&&e.height()>0&&e.height()<a.height()&&(c=e)}),c||(c=a);var d=c.offset().top,e=a.offset().top,f=Ember.$(b).height(),g=0;g=c.height()<=a.height()?d+c.height()-f:e+a.height()-f,this.set("footerOffset","top : "+g+"px;")}}})}),define("YLT/mixins/list-view-cell",["exports"],function(a){"use strict";a["default"]=Ember.Mixin.create({init:function(){switch(this._super(),this.get("column.wordBreak")&&this.get("classNames").pushObjects(["word-break","break-word"]),this.get("column.align")){case"middle":this.get("classNames").pushObjects(["align","middle"]);break;case"right":this.get("classNames").pushObjects(["align","right"]);break;default:this.get("classNames").pushObjects(["align","left"])}this.get("controller.options.content.sortColumn")===this.get("column")&&this.get("classNames").pushObject("active")}})}),define("YLT/views/boolean-list-view-cell",["exports"],function(a){"use strict";a["default"]=Ember.View.extend({tagName:"td",attributeBindings:["row","column"],row:null,column:null,template:Ember.Handlebars.compile("<span>{{boolean-to-check view.renderValue}}</span>"),renderValue:function(){return this.get("column").getRenderValue(this.get("row"))}.property()})}),define("YLT/views/hyperlink-list-view-cell",["./list-view-cell","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=c.extend({template:Ember.Handlebars.compile('{{#if view.routeName}}<span>{{#link-to view.routeName view.rowId}}{{view.renderValue}}{{/link-to}}</span>{{else}}<span><a {{action "navigate" view.rowId target="view"}}>{{view.renderValue}}</a></span>{{/if}}'),routeName:function(){return this.get("column.routeName")}.property("column","column.routeName"),rowId:function(){return this.get("column").getContext(this.get("row"))}.property("column"),actions:{navigate:function(){var a=this.get("column"),b=this.get("row"),c=a.get("routeName");c?this.get("controller").transitionToRoute(c,a.getContext(b)):a.navigate.call(this,b)}}})}),define("YLT/views/infinite-list-view",["../mixins/infinite-fetch-view","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=Ember.View.extend(c,{contentBinding:"controller",template:Ember.Handlebars.compile('<table {{bind-attr class=":table :table-striped :table-hover :stickyfooter fixedLayout"}}><thead><tr>{{#each column in arrangedColumns}}{{view column.headerView columnBinding="column" widthBinding="column.width"}}{{/each}}</tr></thead><tbody>{{#each g in options.tableContent.groups}}{{#each row in g}}{{view row.parentController.rowView contentBinding="row" controllerBinding="row"}}{{#if row.isExpanded}}<tr><td {{bind-attr colspan="row.parentController.arrangedColumns.length"}}>{{view row.parentController.expandedView}}</td></tr>{{/if}}{{/each}}{{/each}}</tbody>{{#if showFooter}}<tfoot {{bind-attr style=view.footerOffset }}{{view footerView contentBinding="arrangedColumns"}}</tfoot>{{/if}}</table>{{#if controller.contentIsLoading}}<div class="loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>{{else}}{{#if resultsAreEmpty}}<div class="no-results">No Results</div>{{/if}}{{/if}}')})}),define("YLT/views/list-view-cell-container",["../mixins/list-view-cell","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=Ember.ContainerView.extend(c,{isEditing:!1,hasFocus:!1,cellView:null,cellViewAttrs:null,boundParam:"value",init:function(){this._super(),Ember.Binding.from("row."+this.get("column.valueBindingPath")).to(this.get("boundParam")).connect(this),this.set("isEditing",!!this.get("controller.isEditing"))},mouseDown:function(){this.set("hasFocus",!0),this._super()},focusOut:function(){this.set("hasFocus",!1),this._super()},hasFocusChanged:function(){var a=this.get("controller.parentController"),b=a.get("autoEdit")&&"cell"===a.get("autoEditMode");this.get("hasFocus")?(b&&this.set("isEditing",!0),this.get("controller")&&this.get("controller").send("beginEditing")):b&&this.set("isEditing",!1)}.observes("hasFocus"),isEditingChanged:function(){if(this.get("isEditing")){var a=this.get("column.editView"),b=a?"string"==typeof a?this.container.lookupFactory("view:"+a):a:Ember.View.extend({templateName:this.get("column.editTemplate")}),c={row:this.get("row"),column:this.get("column"),parentView:this};this.set("currentView",b.create(c))}else this.set("currentView",this.get("cellView").create(this.get("cellViewAttrs")))}.observes("isEditing").on("init")})}),define("YLT/views/list-view-cell",["../mixins/list-view-cell","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=Ember.View.extend(c,{tagName:"td",attributeBindings:["row","column"],defaultTemplate:Ember.Handlebars.compile("<span>{{unbound view.renderValue}}</span>"),row:null,column:null,renderValue:function(){return this.get("column").getRenderValue(this.get("row"))}.property()})}),define("YLT/views/list-view-editable-cell",["exports"],function(a){"use strict";a["default"]=Ember.View.extend({defaultTemplate:Ember.Handlebars.compile('<span>{{input value=view.parentView.value type="text"}}</span>')})}),define("YLT/views/list-view-footer-row",["exports"],function(a){"use strict";a["default"]=Ember.CollectionView.extend({tagName:"tr",createChildView:function(a,b){var c=b.content.get("footerView");return b.column=b.content,b.controller=this.get("controller"),a="string"==typeof c?this.container.lookupFactory(c):c,this._super(a,b)}})}),define("YLT/views/list-view-footer",["exports"],function(a){"use strict";a["default"]=Ember.View.extend({tagName:"td",attributeBindings:["width"],column:null,template:Ember.Handlebars.compile("{{#if view.renderValue}}<div>{{view.renderValue}}</div>{{/if}}"),renderValue:function(){var a=this.get("controller.footerRow"),b=this.get("column");return a?b.getRenderValue(a):b.get("emptyValue")}.property()})}),define("YLT/views/list-view-header",["exports"],function(a){"use strict";a["default"]=Ember.View.extend({tagName:"th",attributeBindings:["column","width"],classNameBindings:"active",width:null,actualWidth:null,column:null,template:Ember.Handlebars.compile('{{#if view.renderValue}}<div {{action "sortByColumn" view.column}} {{bind-attr class=":content :no-header"}}><div>{{view.renderValue}}{{#if view.isSortingAsc}}	<i class="icon-caret-up" style="font-size:10px"></i>{{/if}}{{#if view.isSortingDesc}}<i class="icon-caret-down" style="font-size:10px"></i>{{/if}}{{#if view.column.isLoading}}<div class="cell-spinner"></div>{{/if}}</div></div>{{/if}}'),renderValue:function(){var a=this.get("column");return a?a.get("header"):void 0}.property(),init:function(){switch(this._super(),this.get("column.sortable")===!1&&this.get("classNames").pushObject("not-sortable"),this.get("column.align")){case"middle":this.get("classNames").pushObjects(["align","middle"]);break;case"right":this.get("classNames").pushObjects(["align","right"]);break;default:this.get("classNames").pushObjects(["align","left"])}},active:function(){return this.get("controller.options.content.sortColumn")===this.get("column")}.property("controller.options.content.sortColumn"),isSorting:function(){return this.get("controller.options.content.sortColumn")===this.get("column")}.property("controller.options.content.sortColumn"),isSortingAsc:function(){return this.get("isSorting")&&this.get("controller.options.content.sortAscending")}.property("isSorting","controller.options.content.sortAscending"),isSortingDesc:function(){return this.get("isSorting")&&!this.get("controller.options.content.sortAscending")}.property("isSorting","controller.options.content.sortAscending")})}),define("YLT/views/list-view-row",["../views/list-view-cell-container","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=Ember.CollectionView.extend({tagName:"tr",classNameBindings:["controller.isSelected:selected","controller.isEditing:editing"],onIsEditing:function(){var a=this.get("controller.isEditing");this.forEach(function(b){b.set("isEditing",a)})}.observes("controller.isEditing"),mouseDown:function(a){var b=a.target.parentNode.classList,c=Ember.$.inArray("blockRowSelect",b)>=0;if(!c){var d=this.get("controller"),e=this.get("controller.parentController")||this.get("context"),f=e.get("selectedRow");d.get("isSelected")||(f&&f.set("isSelected",!1),d.set("isSelected",!0),e.set("selectedRow",d))}return!0},doubleClick:function(){var a=this.get("controller"),b=this.get("controller.parentController")||this.get("context");return b?b.rowDoubleClick(a):!0},createChildView:function(a,b){var d=b.content.get("cellView"),e=b.column=b.content;if(a="string"==typeof d?this.container.lookupFactory(d):d,b.controller=this.get("controller"),b.row=b.controller.get("row"),e.get("editable")){var f=Ember.copy(b);return delete f._parentView,f.tagName=null,this._super(c,Ember.merge(b,{cellView:a,cellViewAttrs:f}))}return this._super(a,b)}})}),a.YLT=requireModule("YLT/main")["default"]}(window);